<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WonderLust</title>
</head> -->
<% layout("/layouts/boilerplate") %> <!-- is layout use karne se html ka set custome boilerplate milta h -->
    <!-- <h3>All Listings</h3> -->
    <!-- comment create new listing button this is use on navbar -->
    <!-- <form method="get" action="/listings/new">
        <button>Create New Listing</button>
    </form> -->
    <link rel="stylesheet" href="/css/filter.css">
    <div class="filters-main">
        <div id="filters">
            <div class="left_img_button" id="slideButton" style="display: none;">
                <i class="fa-solid fa-angle-left"></i>
            </div>
            <a href="/listings/">
                <div class="filter ALL ps-2 pe-2">
                    <div><img src="/Icon/0.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p style="text-decoration: none;">ALL</p>
                </div>
            </a>
            <a href="/listings/filter/Beachfront">
                <div class="filter Beachfront">
                    <div><img src="/Icon/1.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Beachfront</p>
                </div>
            </a>
            <a href="/listings/filter/Cabins">
                <div class="filter Cabins">
                    <div><img src="/Icon/2.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Cabins&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Omg">
                <div class="filter OMG">
                    <div><img src="/Icon/3.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;OMG!&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Lake">
                <div class="filter Lake">
                    <div><img src="/Icon/4.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Lake&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Design">
                <div class="filter Design">
                    <div><img src="/Icon/5.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Design&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Amazing Pools">
                <div class="filter Amazing-pools">
                    <div><img src="/Icon/6.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Amazing pools</p>
                </div>
            </a>
            <a href="/listings/filter/Farms">
                <div class="filter Farms">
                    <div><img src="/Icon/7.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Farms&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Amazing Views">
                <div class="filter Amazing-views">
                    <div><img src="/Icon/8.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Amazing views</p>
                </div>
            </a>
            <a href="/listings/filter/Rooms">
                <div class="filter Rooms">
                    <div><img src="/Icon/9.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Rooms&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Lakefront">
                <div class="filter Lakefront">
                    <div><img src="/Icon/10.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Lakefront</p>
                </div>
            </a>
            <a href="/listings/filter/Tiny Homes">
                <div class="filter Tiny-homes">
                    <div><img src="/Icon/11.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Tiny homes</p>
                </div>
            </a>
            <a href="/listings/filter/Countryside">
                <div class="filter Countryside">
                    <div><img src="/Icon/12.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Countryside</p>
                </div>
            </a>
            <a href="/listings/filter/Treehouse">
                <div class="filter Treehouse">
                    <div><img src="/Icon/13.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Treehouse</p>
                </div>
            </a>
            <a href="/listings/filter/Trending">
                <div class="filter Trending">
                    <div><img src="/Icon/14.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Trending</p>
                </div>
            </a>
            <a href="/listings/filter/Tropical">
                <div class="filter Tropical">
                    <div><img src="/Icon/15.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Tropical</p>
                </div>
            </a>
            <a href="/listings/filter/National Parks">
                <div class="filter National-parks">
                    <div><img src="/Icon/16.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>National parks</p>
                </div>
            </a>
            <a href="/listings/filter/Castles">
                <div class="filter Castles">
                    <div><img src="/Icon/17.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Castles</p>
                </div>
            </a>
            <a href="/listings/filter/Camping">
                <div class="filter Camping">
                    <div><img src="/Icon/18.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Camping</p>
                </div>
            </a>
            <a href="/listings/filter/Top Of The World">
                <div class="filter Top-of-the-world">
                    <div><img src="/Icon/19.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Top of the world</p>
                </div>
            </a>
            <a href="/listings/filter/Luxe">
                <div class="filter Luxe">
                    <div><img src="/Icon/20.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Luxe&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Iconic Cities">
                <div class="filter Iconic-cities">
                    <div><img src="/Icon/21.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Iconic cities</p>
                </div>
            </a>
            <a href="/listings/filter/Earth Homes">
                <div class="filter Earth-homes">
                    <div><img src="/Icon/22.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>Earth homes</p>
                </div>
            </a>
            <div class="right_img_button" id="slideButton">
                <i class="fa-solid fa-angle-right"></i>
            </div>
        </div>
        <!-- <div class="tax-toggle tax-filter-icon filterIcon me-2 ms-2 " onclick="filterClick()"> -->
            <!-- <div class="form-check form-switch form-check-reverse pe-1" style="cursor: pointer;"> -->
                <!-- <i class="fa-solid fa-sliders" id="filter-icon"></i> -->
                <!-- <label class="form-check-label" for="filter-icon" style="cursor: pointer;"></label> -->
            <!-- </div> -->
        <!-- </div> -->
        <!-- <div class="tax-toggle tax-filter-icon-small filterIcon me-2 ms-2 " onclick="filterClick()">
            <div class="form-check form-switch form-check-reverse pe-0">
                <i class="fa-solid fa-sliders ps-1" id="filter-icon" style="cursor: pointer;"></i>
            </div>
        </div> -->
        <!-- removed display after taxes selection bar -->
    </div>
    <!-- <div class="tax-toggle tax-sticky">
        <div class="form-check form-switch form-check-reverse">
            <input class="form-check-input tax-switch tax-sticky-sticky shadow-none" type="checkbox" role="switch"
                id="flexSwitchCheckDefaultS" style="cursor: pointer;">
            <label class="form-check-label changeAfter" for="flexSwitchCheckDefaultS" style="cursor: pointer;">Display
                total before taxes</label>
        </div>
    </div> -->
    <div class="modern-listings-grid">
      <% for (const listing of allListing) { %>
        <% let day=Math.floor(Math.random() * 4 + 2); let no=Math.floor(Math.random() * 28 + 1); let date=(new Date('2025-07-1')).getDate() + no; let dateA=(new Date('2025-07-1')).getDate() + no + day; let month=Date().split(" ")[1]; %>
        <a href="/listings/<%= listing._id %>" class="modern-listing-link">
          <div class="modern-listing-card">
            <div class="modern-listing-img-wrap">
              <img src="<%= listing.image.url %>" class="modern-listing-img" alt="listing_image" />
            </div>
            <div class="modern-listing-body">
              <div class="modern-listing-title"><%= listing.title %></div>
              <div class="modern-listing-location"> <%= listing.location %>, <%= listing.country %></div>
              <div class="modern-listing-dates"> <%= day %> nights â€¢ <%= date %>-<%= dateA %> <%= month %></div>
              <div class="modern-listing-price-row">
                <span class="modern-listing-price">&#8377;<%= listing.price.toLocaleString("en-IN") %> <span class="per-night">/night</span></span>
                <span class="modern-listing-total">&#8377;<%= (listing.price*1.18).toLocaleString("en-IN") %> <span class="after-tax">total after taxes</span></span>
              </div>
            </div>
          </div>
        </a>
      <% } %>
    </div>
<style>
.modern-listings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
  gap: 28px 18px;
  margin: 32px 0 32px 0;
}
.modern-listing-link {
  text-decoration: none;
  color: inherit;
  transition: box-shadow 0.18s;
}
.modern-listing-card {
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.10);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: box-shadow 0.18s, transform 0.18s;
  min-height: 340px;
}
.modern-listing-link:hover .modern-listing-card {
  box-shadow: 0 6px 24px rgba(56,142,60,0.13);
  transform: translateY(-4px) scale(1.02);
}
.modern-listing-img-wrap {
  width: 100%;
  aspect-ratio: 4/3;
  background: #f5f5f5;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.modern-listing-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-bottom: 1px solid #eee;
}
.modern-listing-body {
  padding: 16px 18px 14px 18px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.modern-listing-title {
  font-size: 1.13em;
  font-weight: 600;
  color: #2d3a4a;
  margin-bottom: 2px;
}
.modern-listing-location {
  color: #607d8b;
  font-size: 0.98em;
  margin-bottom: 2px;
}
.modern-listing-dates {
  color: #757575;
  font-size: 0.95em;
  margin-bottom: 4px;
}
.modern-listing-price-row {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: 6px;
}
.modern-listing-price {
  font-size: 1.08em;
  font-weight: 500;
  color: #e53935;
}
.per-night {
  color: #757575;
  font-size: 0.97em;
  font-weight: 400;
}
.modern-listing-total {
  font-size: 0.98em;
  color: #388e3c;
  font-weight: 500;
}
.after-tax {
  color: #757575;
  font-size: 0.97em;
  font-weight: 400;
}
@media (max-width: 900px) {
  .modern-listings-grid {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 18px 10px;
  }
  .modern-listing-body {
    padding: 12px 10px 10px 10px;
  }
}
@media (max-width: 600px) {
  .modern-listings-grid {
    grid-template-columns: 1fr;
    gap: 14px 0;
    margin: 18px 0 18px 0;
  }
  .modern-listing-card {
    min-height: 220px;
    border-radius: 8px;
  }
  .modern-listing-img-wrap {
    aspect-ratio: 16/10;
  }
  .modern-listing-title {
    font-size: 1em;
  }
  .modern-listing-location, .modern-listing-dates, .modern-listing-price-row, .modern-listing-total {
    font-size: 0.93em;
  }
}
</style>
        <script defer src="/js/filter.js"></script>
        <script>
            // let heartR = document.querySelectorAll(".heart-r")
            // let heartB = document.querySelectorAll(".heart-b")
            // for (const heartb of heartB) {
            //     heartb.addEventListener("click", ()=>{
            //         heartb.style.zIndex = "4"
            //     })
            // }
            // for (const heartr of heartR) {
            //     heartr.addEventListener("click", ()=>{
            //         heartr.style.zIndex = "3"
            //     })
            // }

            // let heart1 = document.querySelectorAll(".heart")
            // // for (const heart1 of heart) {
            // for(let i = 1; i<  heart1.length; i++){
            //     console.log(heart1[i])
            //     heart1[i].addEventListener("click", ()=>{
            //         // console.log(`click heart: ${heart1[i]}`)
            //     // heart1.addEventListener("click", ()=>{
            //     //     for (const h of heart1) {
            //     //         // console.log(h)
            //     //         h[0].style.zIndex = "4"
            //     //         h[1].style.zIndex = "3"
            //     //     }
            //     })
            // }

        </script>